
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ShareTest</title>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.4.0.js"></script>

</head>
<body>
    <div>Ticket @ViewBag.Ticket</div>
    <div>RawUr @ViewBag.RawUr</div>
    <div>timestamp @ViewBag.timestamp</div>
    <div>nonceStr @ViewBag.nonceStr</div>
    <div>signature @ViewBag.signature</div>
    <div>
    </div>
    <script type="text/javascript">
        var imgUrl = 'http://heijin.mcutec.com/00.png';
        var lineLink = 'http://heijin.mcutec.com/00.png';
        var descContent = "哪些标的重点关注？文内还准备了11分钟策略原理视频，看懂策略无压力！";
        var shareTitle = '【每日一招】泥沙俱下时，这些股惊现黄金回踩';
        var appid = 'wxd999a702fece3188';


        wx.config({
            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
            appId: 'wxd999a702fece3188', // 必填，公众号的唯一标识
            timestamp: '@ViewBag.timestamp', // 必填，生成签名的时间戳
            nonceStr: '@ViewBag.nonceStr', // 必填，生成签名的随机串
            signature: '@ViewBag.signature',// 必填，签名，见附录1
            jsApiList: ['checkJsApi',
                        'onMenuShareTimeline',
                        'onMenuShareAppMessage',
                        'onMenuShareQQ',
                        'onMenuShareWeibo',
                        'hideMenuItems',
                        'showMenuItems',
                        'hideAllNonBaseMenuItem',
                        'showAllNonBaseMenuItem',
                        'translateVoice',
                        'startRecord',
                        'stopRecord',
                        'onRecordEnd',
                        'playVoice',
                        'pauseVoice',
                        'stopVoice',
                        'uploadVoice',
                        'downloadVoice',
                        'chooseImage',
                        'previewImage',
                        'uploadImage',
                        'downloadImage',
                        'getNetworkType',
                        'openLocation',
                        'getLocation',
                        'hideOptionMenu',
                        'showOptionMenu',
                        'closeWindow',
                        'scanQRCode',
                        'chooseWXPay',
                        'openProductSpecificView',
                        'addCard',
                        'chooseCard',
                        'openCard']
        });


        wx.ready(function () {
            //分享给朋友
            wx.onMenuShareAppMessage({
                title: shareTitle, // 分享标题
                desc: descContent, // 分享描述
                link: lineLink, // 分享链接
                imgUrl: imgUrl, // 分享图标
                type: "link", // 分享类型,music、video或link，不填默认为link
                dataUrl: "", // 如果type是music或video，则要提供数据链接，默认为空
                success: function (res) {
                    alert(JSON.stringify(res));
                },
                cancel: function () {
                    //alert("用户取消分享后执行的回调函数");
                },
                fail: function (res) {
                    //alert(JSON.stringify(res));
                }
            });
            //分享到朋友圈
            wx.onMenuShareTimeline({
                title: shareTitle,
                link: lineLink,
                imgUrl: imgUrl,
                trigger: function (res) {
                    //alert('用户点击分享到朋友圈');
                },
                success: function (res) {
                    alert(JSON.stringify(res));
                },
                cancel: function (res) {
                    //alert('朋友圈以取消');
                },
                fail: function (res) {
                    //alert(JSON.stringify(res));
                }
            });

            //分享到QQ
            wx.onMenuShareQQ({
                title: shareTitle,
                desc: descContent,
                link: lineLink,
                imgUrl: imgUrl,
                trigger: function (res) {
                    //alert('用户点击分享到QQ');
                },
                complete: function (res) {
                    //alert(JSON.stringify(res));
                },
                success: function (res) {
                    GetShare("QQ");
                },
                cancel: function (res) {
                    //alert('已取消');
                },
                fail: function (res) {
                    //alert(JSON.stringify(res));
                }
            });
            //分享到微博
            wx.onMenuShareWeibo({
                title: shareTitle,
                desc: descContent,
                link: lineLink,
                imgUrl: imgUrl,
                trigger: function (res) {
                    //alert('用户点击分享到微博');
                },
                complete: function (res) {
                    //alert(JSON.stringify(res));
                },
                success: function (res) {
                    //alert('已分享');
                    GetShare("Weibo");
                },
                cancel: function (res) {
                    //alert('已取消');
                },
                fail: function (res) {
                    //alert(JSON.stringify(res));
                }
            });

            //分享到qq空间
            wx.onMenuShareQZone({
                title: shareTitle, // 分享标题
                desc: descContent, // 分享描述
                link: lineLink, // 分享链接
                imgUrl: imgUrl, // 分享图标
                trigger: function (res) {
                    //alert('用户点击分享到微博');
                },
                complete: function (res) {
                    //alert(JSON.stringify(res));
                },
                success: function (res) {
                    //alert('已分享');
                    GetShare("QZone");
                },
                cancel: function (res) {
                    //alert('已取消');
                },
                fail: function (res) {
                    //alert(JSON.stringify(res));
                }
            });
        });

        wx.error(function (res) {
            //alert(res);
            //alert(location.href.split('#')[0])
        });


    </script>

</body>
</html>
